# Discord 猜歌機器人 - 題庫編輯器
此為編輯器的說明文件，猜歌機器人本體相關介紹請左轉 https://github.com/MaugouMio/SongGuesser/blob/master/README.md

## 介面說明
![介面示意圖](https://i.meee.com.tw/VRoKaUM.png)

- **[A]** 當前開啟的檔案名稱，有未儲存的操作時會有 `*` 標示
- **[B]** 檔案相關操作的列表
  - `新建`：建立一份新的題庫 (快捷鍵 `CTRL + N`)
  - `載入`：載入一份現有的題庫檔案 (快捷鍵 `CTRL + O`)
  - `儲存`：儲存當前的內容，若未建立檔案時會要求儲存檔案的路徑 (快捷鍵 `CTRL + S`)
  - `另存新檔`：將當前內容另存成一份題庫檔案 (快捷鍵 `CTRL + SHIFT + S`)
  - `匯入題庫`：將其他題庫檔案匯入，與當前題庫重複的影片會被略過
  - `設定`：開啟設定視窗<br>![設定介面示意圖](https://i.meee.com.tw/y1raC29.png)
    - `暫存音檔容量上限`：為了在程式中播放音訊，從 Youtube 下載暫存的音訊檔案即為暫存音檔
	  - 已經有對應的暫存檔案時，可以立即播放而不用等待下載
	  - 當暫存的音檔容量超過該上限時，會從最久未播放的暫存音檔開始刪除
	  - 若欲播放的單一音檔大小超過上限，為了正常播放仍會暫存該檔案
    - `暫存影片資訊數量`：影片資訊即顯示在 **[E1]** 區的資訊
	  - 已經有暫存的影片資訊時，可以不用再次連線取得資訊，加速頁面內容的顯示
	  - 當暫存資訊的影片數量超過該上限時，會從最久未顯示的影片資訊開始刪除
- **[C]** 關於這份題庫的整體資訊
  - `題庫名稱`：開始遊戲時顯示的題庫名稱
  - `作者名稱`：開始遊戲時顯示的作者名稱
  - `編輯誤導用答案列表`：開啟誤導答案列表的視窗，與 **[E2]** `允許的答案列表` 格式相同，此處的內容用於關鍵字搜尋時提供錯誤的選項
- **[D]** 該題庫的所有題目列表
  - 標題後方括號顯示題庫中有多少題目
  - 點擊任一項目後，會在 **[E]** 區顯示該題目的資訊
  - 雙擊任一項目可以編輯其在題目列表中顯示的名稱 (僅供編輯者辨識用)
  - `搜尋`：類似瀏覽器的搜尋功能，輸入關鍵字後會將相關的題目醒目提示
    - 輸入框後方顯示 `當前正在檢視第幾項 / 總共有幾項相符`
	- 當前正在檢視的項目會以橘色標註，點選右邊 `↑`, `↓` 按鈕可以迅速跳到下一個項目
	- 切換搜尋項目時不會實際選擇該題目，若要編輯該題目請再手動點選一次
  - `新增題目`：輸入 Youtube 網址新增題目，若為播放清單網址可以選擇匯入整個播放清單
  - `刪除題目`：刪除當前選擇中的題目
  - `自動排序`：根據題目列表顯示的名稱進行排序，僅方便編輯者操作使用
- **[E]** 當前選擇中題目的詳細資訊
  - **[E1]** Youtube 影片相關資訊，包含縮圖、標題、作者、網址
  - **[E2]** 允許的答案列表
    - 玩家猜題時輸入列表中任一項內容都會算對
    - 雙擊任一項目可以編輯內容
    - `新增`：新增一個項目
    - `刪除`：刪除當前選擇中(可複選)的答案 (快捷鍵 `Delete`)
  - **[E3]** 音樂播放器與當前片段資訊
    - `時間軸`：可以拖曳控制當前播放的進度，下方會顯示當前播放時間與歌曲總長 (初次播放前不會顯示歌曲總長)
    - `音量`：控制音樂播放的音量 (僅編輯時試聽使用)
    - `播放/暫停按鈕`：控制播放狀態
    - `前進/後退按鈕`：以 `50 ms` 為單位控制當前播放時間軸
    - `試聽片段`：播放當前片段指定的時間區間 (播放結束的時間可能有誤差，實際聽到的結果以時間軸上標註的時間為主)
    - `設為開頭/結尾`：將當前時間軸的時間設定為當前片段的開頭/結尾時間
    - `跳至`：開頭與結尾的部份各有一個，點選後將時間軸設定成該片段 開頭/結尾 的時間
    - `片段時間`：位於 `跳至` 按鈕的旁邊，顯示該片段 開頭/結尾 的時間，可直接編輯數字
  - **[E4]** 片段列表
    - 列出該題目的所有片段，遊玩時會依序播放列表中的片段，建議由難到簡單進行排序
    - `新增片段`：新增一個片段到列表的最尾端
    - `刪除片段`：刪除當前選擇中的片段
    - `向左/右移動`：將當前選擇中的片段向左/右移動排序

### 其他快捷鍵
- `CTRL + Z`：復原 (UNDO)
- `CTRL + Y`：重做 (REDO)

## 注意事項
為加速載入速度，歌曲會在初次播放時暫存到 cache 資料夾<br>
隨著播放過的歌曲數量增加，該資料夾的容量也會逐漸增加<br>
若 cache 容量過大，可以在編輯器關閉的狀態下刪除其中的檔案或整個資料夾

## 專案測試環境
- Windows 10
- Python 3.13.3
- 相關套件安裝可在資料夾中執行 `pip3 install -r requirements.txt`